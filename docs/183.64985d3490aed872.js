"use strict";(self.webpackChunkfitness_tracker=self.webpackChunkfitness_tracker||[]).push([[183],{183:(V,C,r)=>{r.r(C),r.d(C,{TrainingModule:()=>$});var y=r(9281),x=r(9116),t=r(4650),g=r(1090),p=r(6897),u=r(6895),Z=r(3848),l=r(5412),f=r(9101);let S=(()=>{class n{constructor(e){this.paassedData=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-stop-training"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["mat-button","",3,"mat-dialog-close"]],template:function(e,a){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Are you sure?"),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"p"),t._uU(4),t.qZA()(),t.TgZ(5,"mat-dialog-actions")(6,"button",1),t._uU(7,"Yes"),t.qZA(),t.TgZ(8,"button",1),t._uU(9,"No"),t.qZA()()),2&e&&(t.xp6(4),t.hij("You already got ",a.paassedData.progress,""),t.xp6(2),t.Q6J("mat-dialog-close",!0),t.xp6(2),t.Q6J("mat-dialog-close",!1))},dependencies:[f.lW,l.ZT,l.uh,l.xY,l.H8],encapsulation:2}),n})();var b=r(1572),c=r(1576);let A=(()=>{class n{constructor(e,a,o){this.dialog=e,this.trainingService=a,this.store=o,this.progress=0,this.timer=0,this.goingTraining={},this.isTraining=!1}ngOnInit(){console.log("currentTraining"),this.store.select("training").subscribe(({training:e})=>{const{exercise:a,now:o}=e;this.goingTraining=a,this.isTraining=o}),this.startOrResumeTimer()}startOrResumeTimer(){this.isTraining&&(this.timer=setInterval(()=>{this.progress=this.progress+1,this.progress>=100&&(this.trainingService.completeExercise(this.goingTraining),clearInterval(this.timer))},this.goingTraining.duration/100*1e3))}onStop(){clearInterval(this.timer),this.dialog.open(S,{data:{progress:this.progress}}).afterClosed().subscribe(a=>{a?this.trainingService.cancelExercise(this.progress,this.goingTraining):this.startOrResumeTimer()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.uw),t.Y36(g.O),t.Y36(p.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-current-training"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"current-training"],["mode","determinate",3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0),t._UZ(1,"mat-progress-spinner",1),t.TgZ(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5,"Keep on going, you can do it!"),t.qZA(),t.TgZ(6,"button",2),t.NdJ("click",function(){return a.onStop()}),t._uU(7,"Stop"),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("value",a.progress),t.xp6(2),t.hij("",a.progress," %"))},dependencies:[f.lW,b.Ou,c.xw,c.Wh],styles:[".current-training[_ngcontent-%COMP%]{padding:30px}"]}),n})();var m=r(4006),_=r(9549),d=r(3546),N=r(4385),O=r(3238);function Y(n,i){if(1&n&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.name)}}let U=(()=>{class n{constructor(e,a){this.trainingService=e,this.store=a,this.startTraining=new t.vpe,this.isLoading=!1}ngOnInit(){this.isLoadingSubscription=this.store.select("ui").subscribe(({isLoading:e})=>{this.isLoading=e}),this.availableExercisesSubscription=this.store.select("training").subscribe(({availableExercises:e})=>{console.log({availables:e}),this.exercises=e})}ngOnDestroy(){this.isLoadingSubscription?.unsubscribe(),this.availableExercisesSubscription?.unsubscribe()}onStartTraining(e){const{exercise:a}=e.value;console.log(a),this.trainingService.startExercise(a)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.O),t.Y36(p.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-new-training"]],outputs:{startTraining:"startTraining"},decls:13,vars:2,consts:[["fxLayout","","fxLayoutAlign","center",1,"new-training"],[3,"ngSubmit"],["f","ngForm"],["fxFlex","400px"],["fxLayoutAlign","center"],["placeholder","Choose Exercise","ngModel","","name","exercise","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-button","","color","primary",3,"disabled"],[3,"value"]],template:function(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"section",0)(1,"form",1,2),t.NdJ("ngSubmit",function(){t.CHM(o);const h=t.MAs(2);return t.KtG(a.onStartTraining(h))}),t.TgZ(3,"mat-card",3)(4,"mat-card-title",4),t._uU(5,"Time to start a workout!"),t.qZA(),t.TgZ(6,"mat-card-content",4)(7,"mat-form-field")(8,"mat-select",5),t.YNc(9,Y,2,2,"mat-option",6),t.qZA()()(),t.TgZ(10,"mat-card-actions",4)(11,"button",7),t._uU(12,"Start"),t.qZA()()()()()}if(2&e){const o=t.MAs(2);t.xp6(9),t.Q6J("ngForOf",a.exercises),t.xp6(2),t.Q6J("disabled",o.invalid)}},dependencies:[u.sg,m._Y,m.JJ,m.JL,m.Q7,m.On,m.F,f.lW,_.KE,d.a8,d.dn,d.n5,d.hq,N.gD,O.ey,c.xw,c.Wh,c.yH],styles:[".new-training[_ngcontent-%COMP%]{padding:30px}"]}),n})();var v=r(7974),T=r(6308),s=r(7155),w=r(4144);function D(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Date"),t.qZA())}function J(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,1e3*e.date.seconds,"medium"))}}function E(n,i){1&n&&(t.TgZ(0,"mat-header-cell",17),t._uU(1,"Name"),t.qZA())}function P(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.name)}}function Q(n,i){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Calories"),t.qZA())}function F(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.calories))}}function M(n,i){1&n&&(t.TgZ(0,"mat-header-cell",17),t._uU(1,"Duration"),t.qZA())}function L(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.duration))}}function R(n,i){1&n&&(t.TgZ(0,"mat-header-cell",17),t._uU(1,"State"),t.qZA())}function G(n,i){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.state)}}function I(n,i){1&n&&t._UZ(0,"mat-header-row")}function q(n,i){1&n&&t._UZ(0,"mat-row")}const H=function(){return[1,5,10,20]};let B=(()=>{class n{constructor(e,a){this.trainingServices=e,this.store=a,this.displayedColumns=["date","name","duration","calories","state"],this.dsExercises=new s.by}ngOnInit(){this.store.select("training").subscribe(({finishedExcercises:e})=>{this.dsExercises.data=e}),this.trainingServices.fetchCompletedOrCancelledExercises()}ngOnDestroy(){this.finishedExercisesSubscription?.unsubscribe()}ngAfterViewInit(){this.dsExercises.sort=this.sort,this.dsExercises.paginator=this.paginator}doFilter(e=""){this.dsExercises.filter=e.trim().toLowerCase()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.O),t.Y36(p.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-past-training"]],viewQuery:function(e,a){if(1&e&&(t.Gf(T.YE,5),t.Gf(v.NW,5)),2&e){let o;t.iGM(o=t.CRH())&&(a.sort=o.first),t.iGM(o=t.CRH())&&(a.paginator=o.first)}},decls:24,vars:6,consts:[["fxLayoutAlign","center center"],["fxFlex","40%"],["matInput","","type","text","placeholder","Filter",3,"keyup"],["filtremos",""],["matSort","",3,"dataSource"],["matColumnDef","date"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","calories"],["matColumnDef","duration"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["paginator",""],["mat-sort-header",""]],template:function(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"input",2,3),t.NdJ("keyup",function(){t.CHM(o);const h=t.MAs(3);return t.KtG(a.doFilter(h.value))}),t.qZA()()(),t.TgZ(4,"mat-table",4),t.ynx(5,5),t.YNc(6,D,2,0,"mat-header-cell",6),t.YNc(7,J,3,4,"mat-cell",7),t.BQk(),t.ynx(8,8),t.YNc(9,E,2,0,"mat-header-cell",9),t.YNc(10,P,2,1,"mat-cell",7),t.BQk(),t.ynx(11,10),t.YNc(12,Q,2,0,"mat-header-cell",6),t.YNc(13,F,3,3,"mat-cell",7),t.BQk(),t.ynx(14,11),t.YNc(15,M,2,0,"mat-header-cell",9),t.YNc(16,L,3,3,"mat-cell",7),t.BQk(),t.ynx(17,12),t.YNc(18,R,2,0,"mat-header-cell",9),t.YNc(19,G,2,1,"mat-cell",7),t.BQk(),t.YNc(20,I,1,0,"mat-header-row",13),t.YNc(21,q,1,0,"mat-row",14),t.qZA(),t._UZ(22,"mat-paginator",15,16)}2&e&&(t.xp6(4),t.Q6J("dataSource",a.dsExercises),t.xp6(16),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSize",1)("pageSizeOptions",t.DdM(5,H)))},dependencies:[_.KE,w.Nt,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,T.YE,T.nU,v.NW,c.Wh,c.yH,u.JJ,u.uU]}),n})();function W(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-tab-group")(1,"mat-tab",1)(2,"app-new-training",2),t.NdJ("startTraining",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onGoingTraining=!0)}),t.qZA()(),t.TgZ(3,"mat-tab",3),t._UZ(4,"app-past-training"),t.qZA()()}}function z(n,i){1&n&&t._UZ(0,"app-current-training")}const X=[{path:"",component:(()=>{class n{constructor(e,a){this.trainingService=e,this.store=a,this.onGoingTraining=!1}ngOnInit(){this.trainingSubscription=this.store.select("training").subscribe(({training:e})=>{const{now:a}=e;this.onGoingTraining=a}),this.trainingService.fetchAvailableExercises()}ngOnDestroy(){this.trainingSubscription?.unsubscribe()}onStart(){}onStopTraining(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.O),t.Y36(p.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-training"]],decls:2,vars:2,consts:[[4,"ngIf"],["label","New exercise"],[3,"startTraining"],["label","Past Exercise"]],template:function(e,a){1&e&&(t.YNc(0,W,5,0,"mat-tab-group",0),t.YNc(1,z,1,0,"app-current-training",0)),2&e&&(t.Q6J("ngIf",!a.onGoingTraining),t.xp6(1),t.Q6J("ngIf",a.onGoingTraining))},dependencies:[u.O5,Z.SP,Z.uX,A,U,B]}),n})()}];let K=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[x.Bz.forChild(X),x.Bz]}),n})(),$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[y.m,K]}),n})()}}]);